{"ast":null,"code":"var _jsxFileName = \"E:\\\\Mini Project - Volunteers Part\\\\src\\\\components\\\\videos\\\\routing.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { GET_VOLUNTEERS } from '../../actions/types';\nimport SearchBar from './search_bar';\nimport YTSearch from 'youtube-api-search';\nimport VideoList from './video_list';\nimport VideoDetail from './video_details';\nimport \"./complete.css\";\nimport db from '../../firebase';\nimport { navigate } from '@reach/router';\nconst API_KEY = \"AIzaSyDd-dqSJ53e_p-etO6hdB7EA-E2Nri7Lyw\"; //\"AIzaSyDE2WFy_oZsNwPSnFdKbMBtcXfV68UVkDM\" \tAIzaSyBS7YzMWkBVZWUl1j4Oc1b_dd-fEvsQprs AIzaSyDd-dqSJ53e_p-etO6hdB7EA-E2Nri7Lyw\n\nclass CuratedContents extends Component {\n  constructor(props) {\n    super(props);\n\n    this.videoCompleted = completed => {\n      console.log(\"videoCompleted\");\n      this.setState({\n        completed: completed\n      });\n    };\n\n    this.getVideo = () => {\n      console.log(\"Retrieving the video\");\n      this.setState({\n        selectedVideo: this.state.videos[this.state.index]\n      });\n    };\n\n    this.videoSearch = userVideos => {\n      //console.log(\"hello\",searchTerm,this.state, db.collection('users').doc(this.props.user.uid))\n      this.setState({\n        videos: userVideos\n      });\n      this.getVideo();\n      console.log(\"user videos loaded\");\n    };\n\n    this.state = {\n      index: 0,\n      indexm: 0,\n      videos: ['https://youtu.be/iRN62IebC04', 'https://youtu.be/FSVHx23ByhM', 'https://youtu.be/vG12FW5lMWc', 'https://youtu.be/1LfdbHI4oDE', 'https://youtu.be/-uEc8_dcYUc'],\n      //videos:[], \n      motivates: [\"Talk to friends or family face-to-face\", \"Spend some time in nature\", \"Read a good book\", \"List what you like about yourself\", \"Do something spontaneous\", \"Listen to music\", \"Take a long, hot bath\", \"Watch a funny movie or TV show\"],\n      selectVideo: null,\n      completed: false,\n      user: this.props.user\n    };\n  }\n\n  componentDidMount() {\n    this.props.getVolunteers();\n    console.log(this.props, \"this is video section\");\n    var dataset;\n    db.collection('users').doc(this.props.user.uid).get().then(function (doc) {\n      if (doc.exists) {\n        //searchTerm=searchTerm+doc.data.videoSearchM;\n        dataset = doc.data();\n        console.log(\"Document data in video:\", doc.data(), dataset.UserVideo, dataset.VideoSearchM);\n      } else {\n        console.log(\"video preference not found\");\n      }\n\n      return dataset; //this.getVideo(searchTerm+dataset.VideoSearchM, dataset.UserVideo)\n    }).then(dataset => {\n      console.log(dataset, this.state.index);\n      this.setState({\n        index: dataset.UserVideo % 50\n      });\n      this.setState({\n        indexm: dataset.UserVideo % 8\n      }); //this.getVideo(searchTerm+dataset.VideoSearchM)\n\n      var userVideos; // YTSearch({key: API_KEY, term: this.props.mental+dataset.VideoSearchM,maxValue: 100},(data) => {\n      //   userVideos=data;\n      //   console.log(\"fetched user data\",this.state)\n      //   this.videoSearch(userVideos);\n      // })\n      //this.videoSearch(userVideos);//this is only for testing\n      //this.state.selectVideo=this.state.videos[this.state.index];\n    });\n  }\n\n  render() {\n    console.log(this.state);\n    new SimpleBar(s);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"videos\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(SearchBar, {\n      onSearchTermChange: searchTerm => this.videoSearch(searchTerm),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container mt-3 ml-3 col-md-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(VideoDetail, {\n      video: this.state.selectedVideo,\n      onCompletion: comp => this.videoCompleted(comp),\n      motivation: this.state.motivates,\n      index: this.state.index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md ml-5 scroll\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(VideoList, {\n      onVideoSelect: userSelected => this.setState({\n        selectedVideo: userSelected\n      }),\n      completed: this.state.completed,\n      user: this.state.user,\n      index: this.state.index,\n      indexM: this.state.indexm,\n      videos: this.state.videos,\n      onCompletion: completed => this.videoCompleted(completed),\n      indexChange: indexC => this.setState({\n        index: indexC\n      }),\n      indexMChange: indexMo => this.setState({\n        indexm: indexMo\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  mental: state.volunteer.videoSearchM\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getVolunteers: () => dispatch({\n    type: GET_VOLUNTEERS\n  })\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CuratedContents);","map":{"version":3,"sources":["E:/Mini Project - Volunteers Part/src/components/videos/routing.js"],"names":["React","Component","connect","GET_VOLUNTEERS","SearchBar","YTSearch","VideoList","VideoDetail","db","navigate","API_KEY","CuratedContents","constructor","props","videoCompleted","completed","console","log","setState","getVideo","selectedVideo","state","videos","index","videoSearch","userVideos","indexm","motivates","selectVideo","user","componentDidMount","getVolunteers","dataset","collection","doc","uid","get","then","exists","data","UserVideo","VideoSearchM","render","SimpleBar","s","searchTerm","comp","userSelected","indexC","indexMo","mapStateToProps","mental","volunteer","videoSearchM","mapDispatchToProps","dispatch","type"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { GET_VOLUNTEERS } from '../../actions/types';\r\n\r\nimport SearchBar from './search_bar';\r\nimport YTSearch from 'youtube-api-search';\r\nimport VideoList from './video_list';\r\nimport VideoDetail from './video_details';\r\nimport \"./complete.css\"\r\nimport db from '../../firebase'\r\nimport { navigate } from '@reach/router';\r\nconst API_KEY =\"AIzaSyDd-dqSJ53e_p-etO6hdB7EA-E2Nri7Lyw\";//\"AIzaSyDE2WFy_oZsNwPSnFdKbMBtcXfV68UVkDM\" \tAIzaSyBS7YzMWkBVZWUl1j4Oc1b_dd-fEvsQprs AIzaSyDd-dqSJ53e_p-etO6hdB7EA-E2Nri7Lyw\r\n\r\n\r\n\r\nclass CuratedContents extends Component{\r\n    \r\n    constructor (props){\r\n      super(props);\r\n\r\n      this.state = {\r\n        index: 0,\r\n        indexm:0,\r\n        videos: ['https://youtu.be/iRN62IebC04','https://youtu.be/FSVHx23ByhM','https://youtu.be/vG12FW5lMWc','https://youtu.be/1LfdbHI4oDE','https://youtu.be/-uEc8_dcYUc'],\r\n       //videos:[], \r\n       motivates: [\"Talk to friends or family face-to-face\",\r\n          \"Spend some time in nature\",\r\n          \"Read a good book\",\r\n          \"List what you like about yourself\",\r\n          \"Do something spontaneous\",\r\n          \"Listen to music\",\r\n          \"Take a long, hot bath\",\r\n          \"Watch a funny movie or TV show\"],\r\n        selectVideo: null,\r\n        completed: false,\r\n        user: this.props.user\r\n    \r\n      };\r\n      \r\n    }\r\n    componentDidMount(){\r\n      this.props.getVolunteers();\r\n      console.log(this.props,\"this is video section\")\r\n      \r\n      var dataset\r\n      db.collection('users').doc(this.props.user.uid).get().then(function(doc){\r\n        if (doc.exists) {\r\n            //searchTerm=searchTerm+doc.data.videoSearchM;\r\n            dataset=doc.data();\r\n            console.log(\"Document data in video:\", doc.data(),dataset.UserVideo,dataset.VideoSearchM);\r\n                  \r\n          } \r\n        else{\r\n          console.log(\"video preference not found\")\r\n        }\r\n       return dataset;\r\n        //this.getVideo(searchTerm+dataset.VideoSearchM, dataset.UserVideo)\r\n      }).then((dataset)=>{\r\n          console.log(dataset,this.state.index)\r\n          this.setState({index:dataset.UserVideo%50})\r\n          this.setState({indexm:dataset.UserVideo%8})\r\n          //this.getVideo(searchTerm+dataset.VideoSearchM)\r\n          var userVideos\r\n          // YTSearch({key: API_KEY, term: this.props.mental+dataset.VideoSearchM,maxValue: 100},(data) => {\r\n          //   userVideos=data;\r\n          //   console.log(\"fetched user data\",this.state)\r\n          //   this.videoSearch(userVideos);\r\n          // })\r\n            \r\n          //this.videoSearch(userVideos);//this is only for testing\r\n          \r\n          //this.state.selectVideo=this.state.videos[this.state.index];\r\n        }\r\n      )\r\n    }\r\n  \r\n  \r\n  videoCompleted = (completed) => {\r\n    console.log(\"videoCompleted\")\r\n    this.setState({completed:completed});\r\n    \r\n  }\r\n  getVideo = () =>{\r\n    \r\n    console.log(\"Retrieving the video\")\r\n    this.setState({selectedVideo:this.state.videos[this.state.index]});\r\n    \r\n  }\r\n  \r\n  videoSearch = (userVideos) => {\r\n    //console.log(\"hello\",searchTerm,this.state, db.collection('users').doc(this.props.user.uid))\r\n    \r\n    this.setState({videos:userVideos});\r\n    \r\n    this.getVideo()\r\n    console.log(\"user videos loaded\")\r\n\r\n  }\r\n  \r\n  render(){\r\n    console.log(this.state)\r\n    new SimpleBar(s);\r\n    return(\r\n      <div className=\"videos\">\r\n        \r\n        <SearchBar onSearchTermChange={searchTerm => this.videoSearch(searchTerm)}/>\r\n        <div class=\"row\">\r\n          <div className=\"container mt-3 ml-3 col-md-8\">\r\n            <VideoDetail \r\n              video={this.state.selectedVideo} \r\n              onCompletion={comp => this.videoCompleted(comp)} \r\n              motivation={this.state.motivates} \r\n              index={this.state.index}\r\n            />\r\n        \r\n          </div>\r\n          <div className=\"col-md ml-5 scroll\">\r\n            <VideoList\r\n              onVideoSelect={userSelected => this.setState({selectedVideo: userSelected})}\r\n              completed={this.state.completed}\r\n              user={this.state.user}\r\n              index={this.state.index}\r\n              indexM={this.state.indexm}\r\n              videos={this.state.videos}\r\n              onCompletion={completed => this.videoCompleted(completed)}\r\n              indexChange={indexC => this.setState({index: indexC})}\r\n              indexMChange = {indexMo => this.setState({indexm: indexMo})}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  \r\n  mental : state.volunteer.videoSearchM\r\n})\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  getVolunteers: () => dispatch({type:GET_VOLUNTEERS})\r\n})\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(CuratedContents);"]},"metadata":{},"sourceType":"module"}